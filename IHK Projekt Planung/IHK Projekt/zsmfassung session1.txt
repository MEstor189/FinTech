ğŸ§¾ Projektzusammenfassung â€“ Simulationsengine fÃ¼r Handelsstrategien (Java + Spring Boot)
ğŸ§± Architektur & Aufbau
Technologie-Stack: Java, Spring Boot, Maven, MySQL, Alpaca API

Ordnerstruktur:

engine/ â†’ enthÃ¤lt Simulationslogik

engine/model/ â†’ Trade, Position, Portfolio, SimulationResult

engine/strategy/ â†’ Entry- & Exit-Strategien + StrategyFactory

dto/ â†’ SimulationRequest, SimulationResponse

service/ â†’ SimulationService

controller/ â†’ SimulationController

Einstiegspunkt: Application.java

Logger: SLF4J, in allen relevanten Klassen eingesetzt

ğŸ”„ Simulationsablauf (grob)
Request kommt Ã¼ber /api/simulation mit:

Symbol, Zeitraum

Entry- & Exit-Strategietyp + Parameter

Betrag pro Trade

SimulationService:

Holt Kursdaten aus der DB (StockDataRepository)

Baut Map<LocalDate, StockData> fÃ¼r Strategie

Verwendet StrategyFactory zur Erzeugung der Entry-/Exit-Strategien

Startet SimulationEngine

SimulationEngine:

Iteriert durch Kursdaten

PrÃ¼ft shouldEnter() â†’ erÃ¶ffnet Position

PrÃ¼ft shouldExit() â†’ verkauft alle offenen Positionen

Gibt SimulationResult zurÃ¼ck

Response wird zurÃ¼ckgegeben als JSON â†’ SimulationResponse

âš™ï¸ Strategie-Konzept
ğŸ” Trennung von Entry- & Exit-Strategien
Entry und Exit sind getrennte Interfaces:

EntryStrategy: definiert boolean shouldEnter(StockData)

ExitStrategy: definiert boolean shouldExit(StockData, Portfolio)

Dadurch kÃ¶nnen Strategien beliebig kombiniert werden

ğŸ§  Entry-Strategien
âœ… BuyTheDipEntry
Einstieg bei KursrÃ¼ckgang (z.â€¯B. -3â€¯% zum Vortag)

Vortagskurs muss vorhanden sein

Robust gegen fehlende Tage

âœ… MovingAverageEntry
Einstieg bei Crossover: MA(short) <= MA(long) gestern und MA(short) > MA(long) heute

Spezialbehandlung: gleitender Durchschnitt nur Ã¼ber echte Handelstage

Verbesserte Methode ohne minusDays(i), sondern Ã¼ber sortierte Handelstage

ğŸ’¡ Exit-Strategien
âœ… TargetProfitExit
Exit bei definiertem Gewinnziel (z.â€¯B. +2â€¯%)

Sobald eine Position das Ziel erreicht, werden alle offenen Positionen liquidiert

ğŸ­ StrategyFactory
Nimmt StrategyType (enum), historische Daten, Parametermap

Erstellt Entry- und Exit-Strategien mit Defaultwerten oder benutzerdefinierten Werten

ErmÃ¶glicht einfache Erweiterung um neue Strategietypen

ğŸ“‹ DTOs (Datenobjekte)
SimulationRequest
Symbol, Start-/Enddatum

entryStrategyType, exitStrategyType

entryParams, exitParams als Map

investmentPerTrade

SimulationResponse
List<Trade>

TotalProfit, AverageHoldingDays, TradeCount

ğŸ“Œ Sonstige Regeln & Vereinfachungen
Mehrere parallele KÃ¤ufe erlaubt

Globaler Exit: sobald eine Position das Exit-Kriterium erfÃ¼llt â†’ alle Positionen werden verkauft

Keine Stop-Loss-Regel (nur Gewinnziel oder Simulationsende)

Datenquelle: Kurse aus MySQL, nicht direkt von der API

Logger zur Validierung der Entry-/Exit-Entscheidungen eingebaut

âœ… Testlaufbeispiele
Strategien wurden mehrfach erfolgreich getestet (z.â€¯B. MovingAverageEntry + TargetProfitExit)

Daten aus Juliâ€“Oktober 2024 fÃ¼r AAPL verwendet

Entry-/Exit-Entscheidungen durch Logging belegbar




Exmaple Bodys fÃ¼r die 3 entry strategies:

âœ… 1. BuyTheDipEntry + TargetProfitExit
json
Kopieren
Bearbeiten
{
  "symbol": "AAPL",
  "startDate": "2024-07-01",
  "endDate": "2024-10-01",
  "entryStrategyType": "BUY_THE_DIP",
  "exitStrategyType": "TARGET_PROFIT",
  "entryParams": {
    "dipThreshold": 2.5
  },
  "exitParams": {
    "profitTarget": 3.0
  },
  "investmentPerTrade": 100.0
}
âœ… 2. MovingAverageEntry + TargetProfitExit
json
Kopieren
Bearbeiten
{
  "symbol": "AAPL",
  "startDate": "2024-07-01",
  "endDate": "2024-10-01",
  "entryStrategyType": "MOVING_AVERAGE",
  "exitStrategyType": "TARGET_PROFIT",
  "entryParams": {
    "shortPeriod": 2,
    "longPeriod": 3
  },
  "exitParams": {
    "profitTarget": 2.0
  },
  "investmentPerTrade": 100.0
}
âœ… 3. MomentumEntry + TargetProfitExit
json
Kopieren
Bearbeiten
{
  "symbol": "AAPL",
  "startDate": "2024-07-01",
  "endDate": "2024-10-01",
  "entryStrategyType": "MOMENTUM",
  "exitStrategyType": "TARGET_PROFIT",
  "entryParams": {
    "momentumDays": 3
  },
  "exitParams": {
    "profitTarget": 2.0
  },
  "investmentPerTrade": 100.0
}